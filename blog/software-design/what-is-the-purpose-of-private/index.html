<!DOCTYPE html>
<html lang="en">
  <head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7X96B4HGF4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-7X96B4HGF4');
    </script>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>What Is The Purpose Of Private? — Tom Dalling</title>
    <link rel="stylesheet" href="/style.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Merriweather+Sans:wght@700&amp;family=Merriweather:ital,wght@0,400;0,700;1,400;1,700&amp;family=Montserrat:ital,wght@0,400;0,700;1,400&amp;display=swap" rel="stylesheet">

    <meta name="twitter:site" content="@tom_dalling">
    <meta name="twitter:creator" content="@tom_dalling">
    <link rel="alternate" type="application/rss+xml" title="Tom Dalling" href="https://www.tomdalling.com/blog/feed/">
  <link rel="canonical" href="https://www.tomdalling.com/blog/software-design/what-is-the-purpose-of-private/">
<meta property="og:title" content="What Is The Purpose Of Private?">
<meta property="og:url" content="https://www.tomdalling.com/blog/software-design/what-is-the-purpose-of-private/">
<meta property="og:image" content="https://www.tomdalling.com/images/posts/private.jpg">
<meta name="twitter:card" content="summary_large_image">
</head>

  <body>

    <header class="tw-mb-6 tw-py-2 tw-bg-gray-100 tw-border-b tw-border-gray-200 tw-font-title">
      <nav class="tw-container tw-mx-auto tw-max-w-screen-xl tw-space-x-8 tw-px-4">
        <a href="/" class="tw-text-xl tw-text-black">Tom Dalling</a>
        <a href="/blog/" class="tw-text-black">Blog</a>
      </nav>
    </header>

    <div class="tw-container tw-mx-auto tw-flex tw-flex-col lg:tw-flex-row">

      <main class="tw-flex-1 tw-min-w-0 tw-px-4"><article class="post post-single">

  <header>
    <h1><a href="/blog/software-design/what-is-the-purpose-of-private/">What Is The Purpose Of Private?</a></h1>
    <small class="meta">
      <span class="post-date">09 Nov, 2020</span>
      
      —
      Category: <a class="category" href="/blog/category/software-design/">Software Design</a>
      —
      Suggest changes <a class="post-github" href="https://github.com/tomdalling/tomdalling.com/tree/main/input/posts/2020-11-09_what-is-the-purpose-of-private.md">on GitHub</a>
    </small>
    <div class="main-image">
      <img src="/images/posts/private.jpg" class="img-responsive">
      
    </div>
  </header>

  <div class="post-content body-text">
<p>Why use <code>private</code> at all? What is the benefit of trying to stop other
people from using code that works perfectly well? It’s to reduce
future maintenance costs by discouraging coupling to unstable
dependencies.</p>

<!--more-->

<h2>Change Has Costs</h2>

<p>Codebases are constantly evolving. New code gets added to implement
new requirements. If we’re lucky, existing code gets renamed,
redesigned, refactored and broken apart to improve clarity,
simplicity, and performance. And if we’re <em>really</em> lucky, code
eventually becomes obsolete and gets deleted.</p>

<p>But it’s difficult to build upon code that is constantly changing. It’s
like trying to build a house on shifting sand. If we write some code
that calls a method, can we rely upon that method working correctly
six months from now? What if someone changes the behaviour of the
method in a way that we aren’t expecting? Will they realise that we
depend upon that behaviour, and be careful not to break our code?
Maybe. After six months, I wouldn’t even trust myself to remember.</p>

<p>These problems incur real costs, mostly in terms of wasted developer
time — for example, time spent fixing bugs in previously-working
code due to changes in dependencies. But there are also nasty
second-order costs like developers adopting a very defensive style of
coding, due to perceiving the codebase to be fragile and
unreliable in general.</p>

<h2>Private Communicates Stability</h2>

<p>Categorising code as either <code>public</code> or <code>private</code> is an attempt to
reduce the costs of change by <em>communicating stability</em>. Designating
something as <code>private</code> communicates to other developers that <em>this
thing might change so don’t rely upon it</em>. Conversely, designating
something as <code>public</code> says that <em>this thing is fairly stable so you
can rely upon it</em>, or at least that <em>this thing is more stable than
the private things</em>.</p>

<p>Compilers, linters, and runtime environments assist us, but ultimately
it is still developers communicating information about stability to
other developers.</p>

<h2>The Benefits</h2>

<p>Communicating stability with <code>public</code> and <code>private</code> has multiple
benefits.</p>

<ol>
  <li>
    <p>We are more careful about making changes to public behaviour,
leading to fewer bugs.</p>
  </li>
  <li>
    <p>People can make changes to private behaviour more quickly and
confidently, knowing that it is unlikely to affect the rest of the
codebase.</p>
  </li>
  <li>
    <p>When writing new code, we can make it more reliable by avoiding
coupling to unstable dependencies.</p>
  </li>
  <li>
    <p>When designing classes and modules, it prompts us to invest thought
into which parts should be stable, and which parts we want to be
free to change in the future. This results in code that
accommodates future changes more easily.</p>
  </li>
</ol>

<p>In summary, judicious use of <code>private</code> reduces maintenance costs.</p>

<h2>An Example</h2>

<p>Let’s say we’re writing an integration with the VisageNovel web API
to fetch some user info. We might start with something like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">VisageNovelIntegration</span>
  <span class="k">def</span> <span class="nf">fetch_user_info</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">"https://visagenovel.com/user/</span><span class="si">#{</span><span class="n">user</span><span class="p">.</span><span class="nf">id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">)</span>
  <span class="k">end</span> 
<span class="k">end</span>
</code></pre></div></div>

<p>This works, but the thought occurs that VisageNovel is well known for
“moving fast and breaking things”, and is particularly good at the
latter. Let’s invest a little bit of brainpower and consider how that
might affect us in the future.</p>

<p>By returning the JSON response body from <code>fetch_user_info</code>, it becomes
part of the public interface of <code>VisageNovelIntegration</code>. That is,
other parts of the application will call <code>fetch_user_info</code> and dig
through the return value to get the data that they need. Put another
way, the callers of <code>fetch_user_info</code> are <em>directly coupling to the
structure of VisageNovel’s API response, which we expect to be
unstable</em>. Whenever VisageNovel changes the response body — which
sounds likely and is outside of our control — there is the potential
to break every part of our codebase that uses <code>fetch_user_info</code>. This
is not good.</p>

<p>To mitigate this risk, we need to stop returning the raw API response
from <code>fetch_user_info</code>. This will reduce the coupling between the API
response and rest of the application. We want the code that parses the
API response to be private, so that it can be changed easily in the
future. One way to achieve this is to return a value object instead.
It might look something like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">VisageNovelIntegration</span>
  <span class="k">class</span> <span class="nc">UserInfo</span>
    <span class="n">value_semantics</span> <span class="k">do</span>
      <span class="nb">id</span> <span class="no">Integer</span>
      <span class="n">email</span> <span class="no">String</span>
      <span class="n">picture_url</span> <span class="no">String</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">fetch_info</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">"https://api.visagenovel.com/user/</span><span class="si">#{</span><span class="n">user</span><span class="p">.</span><span class="nf">id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">user_info_from</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="kp">private</span>

    <span class="k">def</span> <span class="nf">user_info_from</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
      <span class="n">json</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">)</span>
      <span class="no">UserInfo</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>
        <span class="ss">id: </span><span class="n">json</span><span class="p">[</span><span class="s1">'id'</span><span class="p">],</span>
        <span class="ss">email: </span><span class="n">json</span><span class="p">[</span><span class="s1">'email'</span><span class="p">],</span>
        <span class="ss">picture_url: </span><span class="n">json</span><span class="p">[</span><span class="s1">'picture'</span><span class="p">],</span>
      <span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Also, perhaps we’re not 100% happy with <code>user_info_from</code>, and can see
it being refactored later. It is new, after all, and new things tend
to change and grow for a while before they become stable. These are
all good reasons to keep the method private. We want to communicate to
other developers that it should not be relied upon.</p>

<p>Let’s say that two months later we get an email from VisageNovel like
this:</p>

<blockquote>
  <p>Dear developer,</p>

  <p>We’ve made some exciting additions to the API. There are new
endpoints available for getting info about pictures. As a result,
the <code>/user/[id]</code> endpoint no longer includes this information in its
response.</p>

  <p>Regards,</p>

  <p>The VisageNovel API Team</p>
</blockquote>

<p>This is now a relatively easy change to handle. The affected code is
private, so we can change it without worrying about how it might
impact the rest of the application. We might end up with something
like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">VisageNovelIntegration</span>
  <span class="k">class</span> <span class="nc">UserInfo</span>
    <span class="n">value_semantics</span> <span class="k">do</span>
      <span class="nb">id</span> <span class="no">Integer</span>
      <span class="n">email</span> <span class="no">String</span>
      <span class="n">picture_url</span> <span class="no">String</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">fetch_info</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="n">attrs</span> <span class="o">=</span> <span class="n">fetch_user_info</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="n">attrs</span><span class="p">[</span><span class="ss">:picture_url</span><span class="p">]</span> <span class="o">=</span> <span class="n">fetch_picture_url</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="no">UserInfo</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="o">**</span><span class="n">attrs</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="kp">private</span>

    <span class="k">def</span> <span class="nf">fetch_user_info</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
      <span class="n">json</span> <span class="o">=</span> <span class="n">fetch</span><span class="p">(</span><span class="s2">"user/</span><span class="si">#{</span><span class="n">user</span><span class="p">.</span><span class="nf">id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
      <span class="p">{</span>
        <span class="ss">id: </span><span class="n">json</span><span class="p">[</span><span class="s1">'id'</span><span class="p">],</span>
        <span class="ss">email: </span><span class="n">json</span><span class="p">[</span><span class="s1">'email'</span><span class="p">],</span>
      <span class="p">}</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">fetch_picture_url</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
      <span class="n">json</span> <span class="o">=</span> <span class="n">fetch</span><span class="p">(</span><span class="s2">"picture/profile/</span><span class="si">#{</span><span class="n">user</span><span class="p">.</span><span class="nf">id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
      <span class="n">json</span><span class="p">[</span><span class="s1">'url'</span><span class="p">]</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">fetch</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="n">response</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">"https://api.visagenovel.com/</span><span class="si">#{</span><span class="n">path</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
      <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>The private methods are completely different, while the public
interface remains the same. We are able to make changes and refactor
with confidence, knowing that we aren’t breaking other parts of the
codebase.</p>

<h2>Addendum: Safety</h2>

<p>Some commenters have correctly pointed out that <code>private</code> is also used
to discourage people from using behaviour that is potentially unsafe.
This is more apparent in languages like Rust, which has explicit
syntax for “safe” and “unsafe” code, where the unsafe code is
typically private.</p>

<p>The assumption is that external callers probably don’t understand how
to use the dangerous functionality safely, and therefore should be
prevented or discouraged from using it.</p>

<p>The corollary assumption is that internal callers <em>do</em> understand how
to use the dangerous functionality correctly. This is more likely than
for external callers but not guaranteed, so I would strive to make the
private code as safe as the public code wherever possible. Private
shouldn’t be seen as a license to ignore safety.</p>

</div>

  <footer>
    <div class="tw-rounded-3xl tw-bg-pink-100 tw-p-8 tw-my-16 tw-text-center tw-bg-opacity-50">
      <p class="tw-text-2xl tw-uppercase tw-text-pink-900 tw-font-black tw-mb-4">Enjoy this?</p>

      <p class="tw-flex tw-flex-col sm:tw-flex-row tw-justify-center tw-item-center sm:tw-items-baseline">
        <a href="/feed/" class="tw-flex-1 tw-bg-pink-500 tw-py-3 tw-px-4 tw-rounded-lg tw-text-pink-100 tw-ring-2 tw-ring-pink-300 tw-max-w-52 hover:tw-text-white">Subscribe via RSS</a>
      </p>

      <p class="tw-text-center tw-mt-4 tw-mb-0 tw-text-pink-900">
        <em>Found a mistake?</em> Pull requests are welcome on
        <a href="https://github.com/tomdalling/tomdalling.com">GitHub</a>.
      </p>
</div>

    


    

  </footer>
</article>
</main>

      <aside class="tw-px-4 tw-text-center lg:tw-text-left lg:tw-w-1/3 tw-flex-none">

        <div class="tw-text-lg tw-font-title tw-mb-1">Subscribe</div>
        <ul class="tw-space-y-2">
          <li>
            <a href="/blog/feed/">
              <i class="fa fa-rss"></i> RSS
            </a>
          </li>
        </ul>

        <div class="tw-text-lg tw-font-title tw-mb-1 tw-mt-6">Recent Posts</div>
        <ul class="recent-posts tw-space-y-2">
          
        <li><a href="/blog/software-processes/leprechauns-root-causes-and-other-fairy-tails/">Leprechauns, Root Causes, And Other Fairy Tales</a></li>
<li><a href="/blog/software-processes/milestones-as-talking-points/">Milestones As Talking Points</a></li>
<li><a href="/blog/mentoring/work-in-thin-vertical-slices/">Work In Thin Vertical Slices</a></li>
<li><a href="/blog/management/the-difference-between-management-and-leadership/">The Difference Between Management And Leadership</a></li>
<li><a href="/blog/random-stuff/feedback-is-a-gift/">Feedback Is Literally A Gift</a></li>
</ul>

        <div class="tw-text-lg tw-font-title tw-mb-1 tw-mt-6">Categories</div>
        <ul class="categories tw-space-y-2">
          
        <li>
            <a href="/blog/cocoa/" class="category">Cocoa</a>
            (<span class="post-count">5</span>
            <a class="feed" href="/blog/cocoa/feed/"><i class="fa fa-rss"></i></a>)
          </li>
<li>
            <a href="/blog/coding-styleconventions/" class="category">Coding Style/Conventions</a>
            (<span class="post-count">3</span>
            <a class="feed" href="/blog/coding-styleconventions/feed/"><i class="fa fa-rss"></i></a>)
          </li>
<li>
            <a href="/blog/coding-tips/" class="category">Coding Tips</a>
            (<span class="post-count">4</span>
            <a class="feed" href="/blog/coding-tips/feed/"><i class="fa fa-rss"></i></a>)
          </li>
<li>
            <a href="/blog/management/" class="category">Management</a>
            (<span class="post-count">1</span>
            <a class="feed" href="/blog/management/feed/"><i class="fa fa-rss"></i></a>)
          </li>
<li>
            <a href="/blog/mentoring/" class="category">Mentoring Notes</a>
            (<span class="post-count">4</span>
            <a class="feed" href="/blog/mentoring/feed/"><i class="fa fa-rss"></i></a>)
          </li>
<li>
            <a href="/blog/random-stuff/" class="category">Miscellaneous</a>
            (<span class="post-count">5</span>
            <a class="feed" href="/blog/random-stuff/feed/"><i class="fa fa-rss"></i></a>)
          </li>
<li>
            <a href="/blog/modern-opengl/" class="category">Modern OpenGL Series</a>
            (<span class="post-count">10</span>
            <a class="feed" href="/blog/modern-opengl/feed/"><i class="fa fa-rss"></i></a>)
          </li>
<li>
            <a href="/blog/ruby/" class="category">Ruby</a>
            (<span class="post-count">2</span>
            <a class="feed" href="/blog/ruby/feed/"><i class="fa fa-rss"></i></a>)
          </li>
<li>
            <a href="/blog/software-design/" class="category">Software Design</a>
            (<span class="post-count">12</span>
            <a class="feed" href="/blog/software-design/feed/"><i class="fa fa-rss"></i></a>)
          </li>
<li>
            <a href="/blog/software-processes/" class="category">Software Processes</a>
            (<span class="post-count">12</span>
            <a class="feed" href="/blog/software-processes/feed/"><i class="fa fa-rss"></i></a>)
          </li>
<li>
            <a href="/blog/testing/" class="category">Testing</a>
            (<span class="post-count">2</span>
            <a class="feed" href="/blog/testing/feed/"><i class="fa fa-rss"></i></a>)
          </li>
<li>
            <a href="/blog/web/" class="category">Web</a>
            (<span class="post-count">1</span>
            <a class="feed" href="/blog/web/feed/"><i class="fa fa-rss"></i></a>)
          </li>
</ul>

        <div class="tw-text-lg tw-font-title tw-mb-1 tw-mt-6">Archives</div>
        <ul class="archives tw-space-y-2">
          
        <li>
            <a href="/blog/2025/" class="year">2025</a>
            (<span class="post-count">6</span>)
          </li>
<li>
            <a href="/blog/2024/" class="year">2024</a>
            (<span class="post-count">2</span>)
          </li>
<li>
            <a href="/blog/2023/" class="year">2023</a>
            (<span class="post-count">5</span>)
          </li>
<li>
            <a href="/blog/2022/" class="year">2022</a>
            (<span class="post-count">1</span>)
          </li>
<li>
            <a href="/blog/2021/" class="year">2021</a>
            (<span class="post-count">6</span>)
          </li>
<li>
            <a href="/blog/2020/" class="year">2020</a>
            (<span class="post-count">5</span>)
          </li>
<li>
            <a href="/blog/2016/" class="year">2016</a>
            (<span class="post-count">1</span>)
          </li>
<li>
            <a href="/blog/2015/" class="year">2015</a>
            (<span class="post-count">2</span>)
          </li>
<li>
            <a href="/blog/2014/" class="year">2014</a>
            (<span class="post-count">3</span>)
          </li>
<li>
            <a href="/blog/2013/" class="year">2013</a>
            (<span class="post-count">5</span>)
          </li>
<li>
            <a href="/blog/2012/" class="year">2012</a>
            (<span class="post-count">10</span>)
          </li>
<li>
            <a href="/blog/2011/" class="year">2011</a>
            (<span class="post-count">1</span>)
          </li>
<li>
            <a href="/blog/2010/" class="year">2010</a>
            (<span class="post-count">5</span>)
          </li>
<li>
            <a href="/blog/2009/" class="year">2009</a>
            (<span class="post-count">9</span>)
          </li>
</ul>

      </aside>

    </div>

    <footer class="page-footer">
      <p>© 2009 – <span class="current-year">2025</span> Tom Dalling</p>

      <p class="social">
        <a href="https://github.com/tomdalling">
          <i class="fa fa-lg fa-github"></i>
        </a>
        <a href="https://stackoverflow.com/users/108105/tom-dalling">
          <i class="fa fa-lg fa-stack-overflow"></i>
        </a>
        <a href="mailto:tom%20at%20tomdalling%20com">
          <i class="fa fa-lg fa-envelope"></i>
        </a>
      </p>
    </footer>

    <script src="/bundles/all.js"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [['$$','$$']],
          displayMath: [['[blockmath]', '[/blockmath]']]
        }
      });
    </script>
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  </body>
</html>
